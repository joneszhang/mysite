<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
  	<meta charset="utf-8">

  	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Zongsi.Zhang|Projects.payment</title>
	<meta name="description" content="Andante is a responsive business/porftolio/blog HTML5 template.">
	<meta name="author" content="Giordano Piazza - http://www.giordanopiazza.com">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  	<link href='http://fonts.googleapis.com/css?family=Armata' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/grid.css">
	<link rel="stylesheet" href="css/flexslider.css">
	<link rel="stylesheet" href="css/prettyPhoto.css">
	<link rel="stylesheet" href="css/style.css">
	<!-- <link rel="stylesheet" href="css/style_white.css"> -->
	<!-- <link rel="stylesheet" href="css/style_smokewine.css"> -->
	<!-- <link rel="stylesheet" href="css/style_forest.css"> -->

	<!-- Responsive Images -->
	<script>document.cookie='resolution='+Math.max(screen.width,screen.height)+'; path=/';</script>

	<!-- Custom Modernizer -->
	<script src="js/libs/modernizr.custom.min.js"></script>
</head>
<body id="sidebar-page">
<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://sc.chinaz.com/">Upgrade to a different browser</a> or install Google Chrome Frame</a> to experience this site.</p>
<![endif]-->
	
	<!-- Logo, Headline, Navigation -->
	<header id="main-header" class="container">
	  	<div class="span12">

	  		<div id="logo">
		  		<a href="index-2.html"><img src="img/content/logo.png" alt="Andante"></a>
		  		<span id="tagline">Undergraduate soulful engineer and designer</span>
	  		</div>
		    
		    <!-- <hgroup id="logo">
		      <h1>Andante /</h1>
		      <h2>Elegant Responsive HTML5 Template</h2>
		    </hgroup> -->

		    <div id="nav-toggle">
		      	<a href="#" data-target=".expandable-nav" class="black button">menu</a>
		    </div>

		    <nav id="main-nav" class="clearfix">
		    	<ul class="dropdown">
				    <li class="current"><a href="index-2.html">Home</a></li>
				    <li><a href="intro_profession.html">About</a></li>
				    <li><a href="portfolio.html">Portfolio</a></li>
				    <li><a href="contact.html">Contact</a></li>
				</ul> <!-- / .dropdown -->
		    </nav> <!-- / #main-nav -->

		</div> <!-- / span12 div -->
	</header> <!-- / Logo, Headline, Navigation -->
	


	<!-- Page with Sidebar -->
	<section id="content" role="main" class="container">
	
	    <h1 class="span12">Payment Module for Game Engine     <small>(2014.9.01 - 2014.10.30)</small></h1>
	    <!-- Content column -->
    	<div>
	    	<p><a class="object" data-hover="icon-zoom-mini" href="img/content/744/content_11.jpg" data-rel="gallery[projects1]"><img src="img/content/thumbs/thumb_1.jpg" class="floatleft" alt="Image title"></a><p>Recently our company imported dozens of Mobile games from abroad and want's to publish them in national market via the channel of mobile operators like CMCC and China Union. All of these games are built based on Cocos2dx and we need to add a payment module into Cocos2dx so that we can easily apply them to all the games at once.</p><p>These games, developed on cocos, can run on Android, which means an excessive layer of java and C++ exists and we found that it was JNI. To implement this module, our works started around 3 layers- payment api in java, excessive tools in JNI, and UI implementation in C++.</p>
	    	
	    	<div class="hr_pattern"></div>

	    	<h3>Division of labour</h3>
	    	<p><a class="object" data-hover="icon-zoom-mini" href="img/content/744/content_11.jpg" data-rel="gallery[projects1]"><img src="img/content/thumbs/thumb_1.jpg" class="floatright" alt="Image title"></a><p>Due to my performance in last project, I was appointed as the leader of a team that consists of 3 people. The other two guys are also interns and people of high efficiency. We respectively implement modules for CMCC, China Union and China Telecom. Besides, I controled the progress and the construction of your project. Everytime we got some progress, I will call us together for a conference and check the codes together with them. And after the initial programming works were done, they were aksed to join another group and I finished the integration of codes and optimized the compile scripts of games.</p>    	
	    	<div class="hr_pattern"></div>

	    	<h3>Operators' SDK</h3>
	    	<p><a class="object" data-hover="icon-zoom-mini" href="img/content/744/content_11.jpg" data-rel="gallery[projects1]"><img src="img/content/thumbs/thumb_2.jpg" class="floatright" alt="Image title"></a><p>Thanks to the rapid development of China's mobile application market, the main operators have already published very mature SDK for App developers. So it seems easy to init and submit order to their server. But for some operators, very complex identification work needs to be done for finishing payment. China Union, for example, will ask you to submit the order to your own server first and send another piece to its server, it will then check it with your server and go to process the payment. Success or not, it will only send the result to your server, which means you have to keep asking your server whether payment has successed after you submitted the order, which means extra codes that support http requests.</p><p>Besides, to fullfill the best structure of codes. We did a lot of work to make up the project directory so that only via changing codes of complile scripts, we can combine SDK of different operators so that we can offer more paths of payment to our clients.</p>

 	    	<div class="hr_pattern"></div>

	    	<h3>JNI</h3>
	    	<p><a class="object" data-hover="icon-zoom-mini" href="img/content/744/content_11.jpg" data-rel="gallery[projects1]"><img src="img/content/thumbs/thumb_2.jpg" class="floatleft" alt="Image title"></a><p>I've never got involved in JNI before and have no idea about how the C++ and java can cowork. So I had to read all the codes other people had written previously and try to find out how it works. I frist read the C++ codes, found where did it call the JNI codes. In this way, I traversed the whole three levels of codes and made it clear how to construct a path that connects C++ and java. I finally chose the static methods to solve this problem because in all games there will only be 1 order at the same time, which means statuc methods are already enough.</p>
   
	
	    	<div class="hr_pattern"></div>

	    	<h3>Compiler</h3>
	    	<p><a class="object" data-hover="icon-zoom-mini" href="img/content/744/content_11.jpg" data-rel="gallery[projects1]"><img src="img/content/thumbs/thumb_2.jpg" class="floatright" alt="Image title"></a><p>After finish coding, it's time to write a scricpt that can automatically create different packages according simple parameters like oem=MobileCM, which requires some knowledge of scripts and compile. Thanks to previous work, the compile of C++ files has already finished, so we concentrated on android compile. We linked anroid-ndk and use ant to help finish building. As I have mentioned before, to make compile easier, we did a lot of work to made up codes. We build directory like Mobilebase to slove .java of basic functions that serve all operators' SDK. For each SDK, we created, say MobileCMBase and MobileCM to save respectively save codes for bassic functions for CMCC's SDK and functions for the call of C++ layer. So that for fusion package, we could imported all functions via just add android.library.reference in project.properties.</p><p>As to scripts, after quick learning, I got the manner to reveive parameters and set conditional judgment. And after one day of work, I finished modifying compiler scripts.</p>
	    </div> <!-- / Content column -->

	</section>


	<!-- Footer -->
    <footer id="main-footer">
    	<div class="container">
        <div>
                <h3>Quick Link</h3>
                <div class="hr_small"></div>
        </div>
	    	<!-- Recent posts -->
			<div class="span3">

				<!-- Post -->
			    <div class="media">
			    	<a class="object" data-hover="icon-zoom" href="img/content/744/content_11.jpg" data-rel="gallery"><img src="img/content/thumbs/minithumb_1.jpg" alt="Image title"></a>
			        <div class="caption">
				       	<h4><a href="details_kinect.html">Pop And Tip &mdash; Somatic Kinect Game</a></h4>
			      		<p><span>12-2013</span></p>
			        </div>
			    </div> <!-- / Post -->
			</div> <!-- / Recent posts -->

			<!-- Twitter widget -->
			<div class="span3">
   			    <div class="media">
			    	<a class="object" data-hover="icon-zoom" href="img/headers/header_2.jpg" data-rel="gallery"><img src="img/content/thumbs/minithumb_4.jpg" alt="Image title"></a>
			        <div class="caption">
				       	<h4><a href="details_gem.html">Gem &mdash; STB game optimization</a></h4>
			      		<p><span>07-2014</span></p>
			        </div>
			    </div> <!-- / Post -->
                      
			</div> <!-- / Twitter widget -->

			<!-- Flickr widget -->
			<div class="span3 ">
	   			    <div class="media">
			    	<a class="object" data-hover="icon-zoom" href="img/headers/header_2.jpg" data-rel="gallery"><img src="img/content/thumbs/minithumb_4.jpg" alt="Image title"></a>
			        <div class="caption">
				       	<h4><a href="details_afm.html">AFM &mdash; Mainframe&android based App</a></h4>
			      		<p><span>09-2013</span></p>
			        </div>
			    </div> <!-- / Post -->

			</div> <!-- / Flickr widget -->

			<!-- Contact -->
			<div class="span3">
	   		    <div class="media">
			    	<a class="object" data-hover="icon-zoom" href="img/headers/header_2.jpg" data-rel="gallery"><img src="img/content/thumbs/minithumb_4.jpg" alt="Image title"></a>
			        <div class="caption">
				       	<h4><a href="details_lex.html">Lex &mdash; DFA based Lex</a></h4>
			      		<p><span>11-2013</span></p>
			        </div>
			    </div> <!-- / Post -->

			</div> <!-- / Contact -->

        </div> <!-- / .container -->
    </footer> <!-- / #main-footer -->




<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script>

<!-- <script src="js/libs/jquery.flexslider.js"></script> -->
<!-- <script src="js/libs/gridpak.js"></script> -->
<script src="js/plugins.js"></script>
<script src="js/script.js"></script>



<!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID.
     mathiasbynens.be/notes/async-analytics-snippet -->


<div style="display:none"><script src='http://v7.cnzz.com/stat.php?id=155540&web_id=155540' language='JavaScript' charset='gb2312'></script></div>
</body>
</html>
